
call main_tc

// Generate error if ever ending up here..
create mo 1 -owner 1
expect getnumberofmo 0


function and_then_exit
  exit application
  // Generate error if ever ending up here..
  create mo 1 -owner 1
  expect getnumberofmo 0
end function


// Generate error if ever ending up here..
create mo 1 -owner 1
expect getnumberofmo 0


function main_tc
  // Call some sub routines...
  create mo 1
  call create_an_mo
  call create_another_mo
  expect getnumberofmo 3
  delete all mo

  // Other testcases
  call test_symbols_1
  call test_calldepth_1

  // Exit when done...
  call and_then_exit
end function
delete all mo


//
// Test to call sub routines
//
function create_an_mo 
	// Add an mo..
	add mo 1
end function	  
delete all mo



function create_another_mo
  add mo 1  	
end function  


//
// Test symbol handling inside a function
//
function test_symbols_1
  s1 = 13
  s2 = 14
  s3 = s1
  s1 = s2
  expect s1 14
  expect s2 14
  expect s3 13
  create mo 666
  nmo = getnumberofmo
  expect nmo 666
  delete all mo
end function



//
// Test function calls from within functions
//
function test_calldepth_1
  cdv = 5
  call test_calldepth_2
  expect cdv 17
end function

function test_calldepth_2
  call test_calldepth_3
end function

function test_calldepth_3
  cdv = 17
end function


//
// Test if statements
//
function test_if_1
  delete all mo
  v_if = 0
  v_0 = 0
  v_1 = 0
  if v_if == 0
    v_0 = 1
  if v_if == 1
    v_1 = 1
  expect v_0 1
  expect v_1 0  
end function





// Generate error if ever ending up here..
create mo 1 -owner 1
expect getnumberofmo 0
exit application